<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MultiCheckMenu</title>
    <script src="../dist/absol-acomp.js?<?php  echo stat('../dist/absol-acomp.js')['mtime'];?>"></script>
    <style>
        :root{
            font-size: 14px;
        }
    </style>
</head>
<body>

<script>
    (function () {
        var _ = absol._;
        var $ = absol.$;

        /********************************************/

        _('<h3>CheckListBox</h3>').addTo(document.body);
        var bt1 = _({
            style: {
                border: '1px solid #ddd',
                minHeight: '30px',
                minWidth: '60px',
                marginBottom: '350px'
            }
        }).addTo(document.body);

        var items = Array(16000).fill(null).map(function (u, i) {
            return { text: `[${i}] ${absol.string.randomPhrase(30)}`, value: i, desc: absol.string.randomPhrase(20) };
        });
        var now = new Date().getTime();
        var clb1 = _({
            tag: 'multicheckmenu',
            style: {
                '--max-height': '300px',
                width: '500px'
            },
            props: {
                enableSearch: true,
                values:[3586, 3588, 3843, 3603, 3571]
            },
            on: {
                change: function (event) {
                    console.log(this.values);
                },
                // submit: function () {
                //     bt1.innerHTML = this.values.join(', ');
                //     this.updatePosition();
                // }
            }
        }).addTo(document.body);
        absol.remoteNodeRequireAsync('demo_check_tree_menu_list.js').then(function (result) {
            clb1.items = result;
            setTimeout(()=>{
                // clb1.values = [];
            }, 5000);
            setTimeout(()=>{
                // clb1.values = result.reduce(function visit(ac, cr){
                //     ac.push(cr.value);
                //     if (cr.items) cr.items.reduce(visit, ac);
                //     return ac;
                // }, [])
            }, 4000);
        });


        clb1.followTarget = bt1;

    })();
</script>
</body>
</html>