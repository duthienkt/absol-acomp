<!DOCTYPE html>
<html>

<head>
    <title>Media Input</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://volcanion.cf/hightlight/styles/default.css">
    <!-- <link rel="stylesheet" href="https://volcanion.cf/materialdesignicons/materialdesignicons.min.css"> -->

    <script src="https://volcanion.cf/hightlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../dist/absol-acomp.js?"></script>
    <style>

    </style>
</head>

<body>

    <div id="first"></div>
    <div id="second"></div>
    <script>
        runDebugTask();

    </script>
    <script class="viewable">
        var x = absol._('mediainput').addTo(document.body);
        x.plugins = [
            {
                getTriggerInner: function (mediainputElt, _, triggerButton) {
                    return _('<svg width="24" height="24" viewBox="0 0 24 24">\
                                <path fill="#3177e8" d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M11,24H13V22H11V24M7,24H9V22H7V24M15,24H17V22H15V24Z" />\
                            </svg>');
                },
                getContent: function (mediainputElt, _, container, oldContent) {
                    if (oldContent) return oldContent;// reuse
                    this._view = _({
                        style: {
                            padding: '5px'
                        },
                        child: [
                        {
                            tag:'label',
                            child:{text:'ThÃªm: '}
                        },    
                        {
                            tag: 'input',
                            on: {
                                keydown: function (ev) {
                                    if (ev.key == "Enter" && this.value.length > 0) {
                                        mediainputElt.appendText(this.value);
                                        this.value = "";
                                        mediainputElt.releasePlugin();//hide content and release itselt
                                    }
                                }
                            }
                        }]
                    });

                    return this._view;
                }

            },
            {
                //plugin without content

                getTriggerInner: function (mediainputElt, _, triggerButton) {
                    return _('span.mdi.mdi-content-paste');
                },
                onActive: function (mediainputElt) {
                    navigator.clipboard.readText().then(function (text) {
                        mediainputElt.appendText(text)
                    });

                    mediainputElt.releasePlugin();//relase for next active
                }
            }
        ]
    </script>




    <script>
        var viewableScript = document.querySelectorAll('script.viewable');
        viewableScript.forEach(function (elt) {
            absol.$(elt).selfReplace(absol._({
                tag: 'pre',
                child: {
                    tag: 'code',
                    class: 'js',
                    child: { text: elt.innerHTML }
                }
            }));
        });
        setTimeout(function () {
            var href = location.href;
            var mathedscroll = href.match(/\#([a-z0-9\_A-Z\-]+)/);
            if (mathedscroll) {
                var e = absol.$(mathedscroll[0]);
                if (e) e.scrollIntoView();
            }
        }, 1000)
    </script>

</body>

</html>