<!DOCTYPE html>
<html>

<head>
    <title>Sprite</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://absol.cf/hightlight/styles/default.css">
    <!-- <link rel="stylesheet" href="https://absol.cf/materialdesignicons/materialdesignicons.min.css"> -->
    <script src="../dist/absol-acomp.js?<?php  echo stat('../dist/absol-acomp.js')['mtime'];?>"></script>

    <script src="https://absol.cf/hightlight/highlight.pack.js"></script>

    <style>

    </style>
</head>

<body>
    <h1>Sprite</h1>
    <div id="demo1"></div>
    <script class="viewable">
        (function () {
            var _ = absol._;
            var $ = absol.$;
            var demo1 = $('#demo1')
            var sprites = Array(5).fill(0).map(function(){
                var mSprite = _({
                    tag: 'sprite',
                    props: {
                        src: 'https://absol.cf/emoji/anim/x120/sleepy.png',
                        fps: 15,
                        loop: true,
                        frames: {
                            type: 'grid',
                            col: 1,
                            row: 77
                        }
                    },
                    on: {
                        ready: function () {

                        },
                        stop: function () {
                            playBtn.innerHTML = "PLAY";
                        },
                        frame: function () {
                        }
                    }
                });
                demo1.addChild(mSprite);
                 mSprite.afterReady().then(function () {
                    mSprite.width = mSprite.texture.naturalWidth;
                    mSprite.height =  mSprite.width;
                     mSprite.frames = {
                            type: 'grid',
                            col: 1,
                            row:  mSprite.texture.naturalHeight/ mSprite.texture.naturalWidth
                        }
                    mSprite.drawFrame(0);

                });
                return mSprite;
            });
            

            var playBtn = _('<button>Play</button>')
                .on('click', function () {
                    if (sprites[0].state != "RUNNING") {
                        sprites.forEach(function(s){
                        s.play();

                        });
                        this.innerHTML = "PAUSE";
                    }
                    else if (sprites[0].state == "RUNNING") {
                        this.innerHTML = "PLAY";
                         sprites.forEach(function (s) {
                            s.pause();

                        })
                    }
                });
            demo1.addChild(playBtn);
        })()

    </script>

    <h1>AutoSprite</h1>
    <div id="demo2"></div>
    <script>
          (function () {
                var _ = absol._;
                var $ = absol.$;
                var demo2 = $('#demo2')
                var sprites = Array(5).fill(0).map(function () {
                    var mSprite = _({
                        tag: 'iconsprite',
                        props: {
                            src: 'https://absol.cf/emoji/anim/x120/sleepy.png',
                            fps: 15,
                            frames: {
                                type: 'grid',
                                col: 1,
                                row: 77
                            }
                        },
                        on: {
                            ready: function () {

                            },
                            stop: function () {
                               
                            },
                            frame: function () {
                            }
                        }
                    });
                    demo2.addChild(mSprite);
                    
                    return mSprite;
                });
                
            })()

    </script>
    <script src="https://absol.cf/absol/demo/autohightlighting.js?"></script>

</body>

</html>